# SPDX-License-Identifier: MIT
# Planck Split Keyboard Configuration
# ZMK Firmware - Optimized for Zephyr 4.x
# Updated: 2026-01-20 based on ZMK official documentation

# ============================================================
# Pointing / Encoder
# https://zmk.dev/docs/config/pointing
# ============================================================
CONFIG_ZMK_POINTING=y
CONFIG_ZMK_POINTING_SMOOTH_SCROLLING=y

# ============================================================
# Power Management / Sleep
# https://zmk.dev/docs/features/low-power-states
# ============================================================
CONFIG_ZMK_SLEEP=y
CONFIG_ZMK_IDLE_TIMEOUT=30000
CONFIG_ZMK_IDLE_SLEEP_TIMEOUT=900000

# Soft Off - 支持从 keymap 软关机
CONFIG_ZMK_PM_SOFT_OFF=y

# ============================================================
# Bluetooth - 官方推荐的稳定性配置
# https://zmk.dev/docs/config/bluetooth
# ============================================================

# 实验性连接优化 - 禁用 2M PHY 提高稳定性
CONFIG_ZMK_BLE_EXPERIMENTAL_CONN=y

# 增强蓝牙信号强度 (+8dBm)
CONFIG_BT_CTLR_TX_PWR_PLUS_8=y

# ============================================================
# Split Keyboard Battery Reporting
# https://zmk.dev/docs/config/split
# 从外围设备获取电池电量并代理报告给主机
# ============================================================
CONFIG_ZMK_SPLIT_BLE_CENTRAL_BATTERY_LEVEL_FETCHING=y
CONFIG_ZMK_SPLIT_BLE_CENTRAL_BATTERY_LEVEL_PROXY=y

# ============================================================
# PWM / LED (需要硬件支持)
# ============================================================
CONFIG_PWM=y
CONFIG_LED=y
CONFIG_LED_PWM=y

# ============================================================
# Debounce - 按键防抖配置
# https://zmk.dev/docs/config/kscan
# 根据开关类型调整，默认 5ms 适合大多数开关
# ============================================================
# CONFIG_ZMK_KSCAN_DEBOUNCE_PRESS_MS=5
# CONFIG_ZMK_KSCAN_DEBOUNCE_RELEASE_MS=5

# ============================================================
# Settings Save Debounce
# https://zmk.dev/docs/config/settings
# 减少闪存写入频率，延长设备寿命
# ============================================================
CONFIG_ZMK_SETTINGS_SAVE_DEBOUNCE=60000
